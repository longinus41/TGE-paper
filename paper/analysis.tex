% !TEX root = main.tex

\section{Preliminary}
\label{sec:preliminary}
In this section, we present some preliminaries related to smart contracts and identity.

%Note that our work is general to blockchains that support
%smart contracts, not only Ethereum. However, terminologies in different
%blockchains vary a lot. Thus, we use terminologies in Ethereum in the
%following. And it is practical to apply our approach to other blockchains.

%\subsection{Accounts}
%Accounts play a central role in Ethereum. There are two types of accounts in Ethereum: \emph{Externally Owned Accounts (EOAs)} and \emph{Contract Accounts (CAs)}. Both EOAs and CAs have unique addresses and \emph{Ether} (the cryptocurrency of Ethereum, or ETH for short) balance. Their major difference is that EOAs are controlled by people who hold the public-private key pairs, whereas CAs are ruled by executable codes of smart contracts. For a CA, code execution is triggered by transactions or messages (calls) received from other contracts.

%In summary, the state of all accounts determines the state of the Ethereum network, which is updated with every block and the network really needs to reach a consensus about. Accounts are essential for users to interact with the Ethereum blockchain via transactions.

 %\subsection{Transactions}
 %The term transaction is used in Ethereum to refer to the signed data package that stores a message to be sent from an account to another on the blockchain. A transaction is called the \emph{external one} if it is sent from an EOA, and the \emph{internal one} is generated by executing a smart contract by an external transaction~\cite{chen2018infocom}.

%Note that an external transaction may lead to many internal transactions.
%Transaction represents an action between two accounts, which is basic unit in each Ethereum block.
%Transaction can be categorized as external one and internal one based on the sponsor of the transaction.
%Transactions can be categorized into different types, including \texttt{CALL}, \texttt{CRATE}, \texttt{REWARD} and \texttt{SUICIDE}. The most common type is the \texttt{CALL} transactions used for ETH transferring or contract invoking. The \texttt{CREATE} transactions are used to deploy smart contracts while the contract can be destroyed at the end of their cycles via the \texttt{SUICIDE} method. The \texttt{REWARD} transactions appear on the head of each block, which depicts the reward that block miner obtained from special system accounts.

\subsection{Smart Contract}
Although Bitcoin is the most striking example realizing the concept of a decentralized cryptocurrency system, it does not support complex programs. With the development of blockchain technology, competitive successors have emerged and extended blockchain functions to support applications. The most significant one is Ethereum, providing Turing-complete smart contracts that are a collection of codes and data that resides at specific addresses on blockchain~\cite{buterin2013ethereum}.

%\textcolor{red}{As the largest blockchain platform that supports various transactions including cryptocurrency transferring and smart contracts~\cite{chen2018infocom}, Ethereum is designed based on the \emph{Account/Balance} model which is more intuitive compared to the \emph{UTXO} model.}
Different from Bitcoin using the \emph{unspent transaction output} (UTXO) model, Ethereum and other Ethereum-like blockchains are designed based on the \emph{Account/Balance} model to support smart contracts. Due to this difference, there is no concept of accounts or balances in Bitcoin but Ethereum has them.

There are two types of accounts in Ethereum: \emph{Externally Owned Accounts} (EOAs, also known as Normal Accounts in some Ethereum-like blockchains) and \emph{Contract Accounts} (CAs). Both EOAs and CAs have unique addresses and the cryptocurrency balances. Their major difference is that EOAs are controlled by people who hold the public-private key pairs, whereas CAs are ruled by executable codes of smart contracts. For a CA, code execution is triggered by transactions from EOAs or messages (calls) received from other CAs.

%In summary, the state of all accounts determines the state of the Ethereum network, which is updated with every block and the network really needs to reach a consensus about.
Accounts are essential for users to interact with the Ethereum blockchain via transactions. The term transaction is used in Ethereum to refer to the data to be sent from an account to another on the blockchain. A transaction is called the \emph{external one} if it is sent from an EOA, and the \emph{internal one} is generated by executing a smart contract by an external transaction~\cite{chen2018infocom}. Transactions can be categorized into different types, including \texttt{CALL}, \texttt{CRATE}, \texttt{REWARD} and \texttt{SUICIDE}. The most common type is the \texttt{CALL} transactions used for money transferring or contract invoking. The \texttt{CREATE} transactions are used to deploy smart contracts, and they can be destroyed at the end of their cycles via the \texttt{SUICIDE} method. The \texttt{REWARD} transactions appear on the head of each block, which depicts the reward that block miner obtained from special system accounts.

%Note that an external transaction may lead to many internal transactions.
%Transaction represents an action between two accounts, which is basic unit in each Ethereum block.
%Transaction can be categorized as external one and internal one based on the sponsor of the transaction.


 %The sender of \texttt{REWARD} transaction is a special address \texttt{0x00...00}. In the  transaction,  \texttt{CALL}, \texttt{CREATE} and \texttt{SUICIDE} transactions can be either external transactions or internal transactions since the initiator can be both EOA and SC.

%For ETH transfer, the transaction value is a non-zero number. However, the process of ERC-20 token transfer is more complicated. The sponsor A (also called initiator) make a \texttt{CALL} transaction to the ERC-20 smart contract to tell that he want to transfer ERC-20 token to somebody B. Then the smart contract will check the request and complete the deal if A has enough ERC-20 token. Note that the target address of the \texttt{CALL} transaction is the ERC-20 SC instead of B address and the transfer value is $0$ ETH since the actual transfer happens in the smart contract where the ERC-20 token is transferred from A account to B account in the smart contract inner database.

Based on the above mentioned transactions, various activities can be enabled on Ethereum, such as money transfer, contract creation and contract invocation~\cite{chen2018infocom}.

%\textcolor{gray}{The on-chain assets include ETH coin and ERC-20 token.}

\subsection{Arbitrary Identity}
%\textcolor{blue}{
Smart contracts can enable new blockchain applications, beyond simple cryptocurrency trading. A typical example is ERC-20, which is a technical standard on the Ethereum for implementing tokens~\cite{erc-20-wiki}. It defines a common list of rules that an Ethereum token has to implement, giving developers the ability to program new tokens. With ERC-20, many new identities emerge, such as primary market investors and ICO fundraisers~\cite{cerchiello2018icos}. Besides, there are many different kinds of smart contracts. For example, \textcolor{red}{contracts for non-fungible tokens (also known as deeds) based on ERC-721 standard and contracts for Ethereum Name Service based on ERC-137 standard~\footnote{ERC Draft, https://eips.ethereum.org/erc}.} Thanks to their Turing-completeness, arbitrary smart contracts are expected, and correspondingly, users with arbitrary identities will be involved in blockchain.

%ERC-20, which is a technical standard used for smart contracts on the Ethereum blockchain for implementing tokens [20]. It denes a common list of rules that an Ethereum token has to implement, giving developers the ability to program how new tokens will function within the Ethereum ecosystem.

%\textcolor{blue}{Today, there are more than hundreds of different smart contracts on
%Ethereum\footnote{https://eips.ethereum.org/all}. 

%Besides, there are even more smart contracts are proposed. Some of them are for non-fungible token, while some are for name service. As smart contracts are Turing-complete, we may expect arbitrary smart contracts emerge, and correspondingly, users with arbitrary identities will be involved in blockchain.
%}

%\textcolor{blue}{
It is worthwhile to mention that it is very hard, if possible, to make a perfect identity categorization. Generally, these accounts can be classified into different categories according to user roles on the blockchain. \textcolor{red}{At present time, a well-recognized identity categorization has prominent ones, including mining pools, exchanges, token wallets, investors and so on\footnote{TokenAnalyst, https://www.tokenanalyst.io/}.}
%TokenAnalyst listed several prominent ones, including mining pools, exchanges, token wallets, investors and so on\footnote{TokenAnalyst, https://www.tokenanalyst.io/}.
 However, Ethereum is still in a development stage. The implementation of DApps is being extended and deepened and various identities behind such DApps emerge inevitably.
%}
%=======
%\subsection{Arbitrary Identity}
%Based on smart contract, lots of distributed applications (DApps) with complex functions spring up in Ethereum and other Ethereum-like blockchains.
%>>>>>>> Stashed changes

%\textcolor{red}{The Ethereum hosts many different types of users which hold the accounts as their avatars. Most are ordinary people, but the bulk of holdings are distributed among specific categories. Generally, these accounts can be classified into different categories according to user roles on the blockchain. TokenAnalyst listed several prominent ones, including  mining pools, exchanges, token wallets, investors and so on\footnote{TokenAnalyst, https://www.tokenanalyst.io/}.}


%\textcolor{red}{To be frank, the perfect categorization does not exist because Ethereum is still in a development stage. The implementation of DApps (decentralized applications) is being extended and deepened and various identities behind such DApps emerge inevitably.}

%\textcolor{red}{Nonetheless, we advocate that identity inferring may also be required for transaction analysis on Ethereum. It is important to reveal the identities behind accounts without violating user privacy rights. By tracking and inferring these accounts, we can have better understanding what is occurring on the blockchain. For instance, cryptocurrency team can make airdrop to the top valuable accounts and the fraud or cheating actions can be detected efficiently.}

%\textcolor{red}{Deanonymization, particularly identity inferring remains a challenge due to complex interaction on Ethereum. Here we try valiantly to present a crude but effective taxonomy of Ethereum accounts, which are illustrated in TABLE~\ref{table:identity}. A detailed description is given in Section~\ref{sec:experiments}.  }

%However, anonymity of blockchain makes the identification more difficult. Generally, these accounts can be classified into different categories according to user roles on the blockchain.

